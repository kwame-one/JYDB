{"version":3,"sources":["file://smalltalk/smalltalk.min.js","file://smalltalk/webpack/bootstrap 44edda3d5bd72e70d2e3","file://smalltalk/external \"es6-promise\"","file://smalltalk/node_modules/currify/legacy/index.js","file://smalltalk/node_modules/fullstore/legacy/index.js","file://smalltalk/lib/smalltalk.js","file://smalltalk/node_modules/currify/legacy/lib/currify.js","file://smalltalk/node_modules/fullstore/legacy/lib/fullstore.js"],"names":["smalltalk","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","es6","promise","getTemplate","title","msg","buttons","replace","map","toLowerCase","join","showDialog","options","ok","store","cancel","dialog","document","createElement","closeButtons","Promise","resolve","reject","noCancel","empty","tmpl","innerHTML","className","body","appendChild","find","forEach","el","focus","setSelectionRange","length","addListenerAll","event","closeDialog","target","addEventListener","keyDown","keyDown_","KEY","ENTER","ESC","TAB","LEFT","UP","RIGHT","DOWN","keyCode","namesAll","names","getDataName","preventDefault","remove","shiftKey","tab","filter","toUpperCase","changeButtonFocus","stopPropagation","getAttribute","active","activeElement","activeName","isButton","test","count","activeIndex","indexOf","getIndex","reduce","element","notEmpty","a","querySelector","parent","elements","fn","removeEl","parentElement","removeChild","window","currify","_len","arguments","args","Array","_key","BUTTON_OK","BUTTON_OK_CANCEL","alert","prompt","undefined","valueStr","String","confirm","index","_toConsumableArray","arr","isArray","arr2","from","check","Error","tail","list","slice","f","apply","b","e","again","concat","data"],"mappings":"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","file":"smalltalk.min.js","sourcesContent":["var smalltalk =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/* unknown exports provided */\n/* all exports used */\n/*!******************************!*\\\n  !*** external \"es6-promise\" ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\nmodule.exports = es6-promise;\n\n/***/ }),\n/* 1 */\n/* unknown exports provided */\n/* all exports used */\n/*!***********************************!*\\\n  !*** ./~/currify/legacy/index.js ***!\n  \\***********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./lib/currify */ 5);\n\n\n/***/ }),\n/* 2 */\n/* unknown exports provided */\n/* all exports used */\n/*!*************************************!*\\\n  !*** ./~/fullstore/legacy/index.js ***!\n  \\*************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! ./lib/fullstore */ 6);\n\n\n/***/ }),\n/* 3 */\n/* unknown exports provided */\n/* all exports used */\n/*!**************************!*\\\n  !*** ./lib/smalltalk.js ***!\n  \\**************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nwindow.Promise = window.Promise || __webpack_require__(/*! es6-promise */ 0);\n\nvar currify = __webpack_require__(/*! currify/legacy */ 1);\nvar store = __webpack_require__(/*! fullstore/legacy */ 2);\nvar keyDown = currify(keyDown_);\n\nvar remove = bind(removeEl, '.smalltalk');\n\nvar BUTTON_OK = ['OK'];\nvar BUTTON_OK_CANCEL = ['OK', 'Cancel'];\n\nexports.alert = function (title, msg) {\n    return showDialog(title, msg, '', BUTTON_OK, { cancel: false });\n};\n\nexports.prompt = function (title, msg) {\n    var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    var options = arguments[3];\n\n    var val = String(value).replace(/\\\"/g, '&quot;');\n    var valueStr = '<input type=\"text\" value=\"' + val + '\" data-name=\"js-input\">';\n\n    return showDialog(title, msg, valueStr, BUTTON_OK_CANCEL, options);\n};\n\nexports.confirm = function (title, msg, options) {\n    return showDialog(title, msg, '', BUTTON_OK_CANCEL, options);\n};\n\nfunction getTemplate(title, msg, value, buttons) {\n    var encodedMsg = msg.replace(/\\n/g, '<br>');\n\n    return '<div class=\"page\">\\n        <div data-name=\"js-close\" class=\"close-button\"></div>\\n        <header>' + title + '</header>\\n        <div class=\"content-area\">\\n            ' + encodedMsg + '\\n            ' + value + '\\n        </div>\\n        <div class=\"action-area\">\\n            <div class=\"button-strip\"> ' + buttons.map(function (name, i) {\n        return '<button tabindex=' + i + ' data-name=\"js-' + name.toLowerCase() + '\">' + name + '</button>';\n    }).join('') + '\\n            </div>\\n        </div>\\n    </div>';\n}\n\nfunction showDialog(title, msg, value, buttons, options) {\n    var ok = store();\n    var cancel = store();\n\n    var dialog = document.createElement('div');\n    var closeButtons = ['cancel', 'close', 'ok'];\n\n    var promise = new Promise(function (resolve, reject) {\n        var noCancel = options && !options.cancel;\n        var empty = function empty() {};\n\n        ok(resolve);\n        cancel(noCancel ? empty : reject);\n    });\n\n    var tmpl = getTemplate(title, msg, value, buttons);\n\n    dialog.innerHTML = tmpl;\n    dialog.className = 'smalltalk';\n\n    document.body.appendChild(dialog);\n\n    find(dialog, ['ok', 'input']).forEach(function (el) {\n        return el.focus();\n    });\n\n    find(dialog, ['input']).forEach(function (el) {\n        el.setSelectionRange(0, value.length);\n    });\n\n    addListenerAll('click', dialog, closeButtons, function (event) {\n        return closeDialog(event.target, dialog, ok(), cancel());\n    });\n\n    ['click', 'contextmenu'].forEach(function (event) {\n        return dialog.addEventListener(event, function () {\n            return find(dialog, ['ok', 'input']).forEach(function (el) {\n                return el.focus();\n            });\n        });\n    });\n\n    dialog.addEventListener('keydown', keyDown(dialog, ok(), cancel()));\n\n    return promise;\n}\n\nfunction keyDown_(dialog, ok, cancel, event) {\n    var KEY = {\n        ENTER: 13,\n        ESC: 27,\n        TAB: 9,\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        DOWN: 40\n    };\n\n    var keyCode = event.keyCode;\n    var el = event.target;\n\n    var namesAll = ['ok', 'cancel', 'input'];\n    var names = find(dialog, namesAll).map(getDataName);\n\n    switch (keyCode) {\n        case KEY.ENTER:\n            closeDialog(el, dialog, ok, cancel);\n            event.preventDefault();\n            break;\n\n        case KEY.ESC:\n            remove();\n            cancel();\n            break;\n\n        case KEY.TAB:\n            if (event.shiftKey) tab(dialog, names);\n\n            tab(dialog, names);\n            event.preventDefault();\n            break;\n\n        default:\n            ['left', 'right', 'up', 'down'].filter(function (name) {\n                return keyCode === KEY[name.toUpperCase()];\n            }).forEach(function () {\n                changeButtonFocus(dialog, names);\n            });\n\n            break;\n    }\n\n    event.stopPropagation();\n}\n\nfunction getDataName(el) {\n    return el.getAttribute('data-name').replace('js-', '');\n}\n\nfunction changeButtonFocus(dialog, names) {\n    var active = document.activeElement;\n    var activeName = getDataName(active);\n    var isButton = /ok|cancel/.test(activeName);\n    var count = names.length - 1;\n    var getName = function getName(activeName) {\n        if (activeName === 'cancel') return 'ok';\n\n        return 'cancel';\n    };\n\n    if (activeName === 'input' || !count || !isButton) return;\n\n    var name = getName(activeName);\n\n    find(dialog, [name]).forEach(function (el) {\n        el.focus();\n    });\n}\n\nvar getIndex = function getIndex(count, index) {\n    if (index === count) return 0;\n\n    if (index < count) return index + 1;\n};\n\nfunction tab(dialog, names) {\n    var active = document.activeElement;\n    var activeName = getDataName(active);\n    var count = names.length - 1;\n\n    var activeIndex = names.indexOf(activeName);\n    var index = getIndex(count, activeIndex);\n\n    var name = names[index];\n\n    find(dialog, [name]).forEach(function (el) {\n        return el.focus();\n    });\n}\n\nfunction closeDialog(el, dialog, ok, cancel) {\n    var name = el.getAttribute('data-name').replace('js-', '');\n\n    if (/close|cancel/.test(name)) {\n        cancel();\n        remove();\n        return;\n    }\n\n    var value = find(dialog, ['input']).reduce(function (value, el) {\n        return el.value;\n    }, null);\n\n    ok(value);\n    remove();\n}\n\nfunction find(element, names) {\n    var notEmpty = function notEmpty(a) {\n        return a;\n    };\n    var elements = names.map(function (name) {\n        return element.querySelector('[data-name=\"js-' + name + '\"]');\n    }).filter(notEmpty);\n\n    return elements;\n}\n\nfunction addListenerAll(event, parent, elements, fn) {\n    find(parent, elements).forEach(function (el) {\n        return el.addEventListener(event, fn);\n    });\n}\n\nfunction removeEl(name) {\n    var el = document.querySelector(name);\n\n    el.parentElement.removeChild(el);\n}\n\nfunction bind(fn) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n\n    return function () {\n        return fn.apply(undefined, args);\n    };\n}\n\n/***/ }),\n/* 4 */,\n/* 5 */\n/* unknown exports provided */\n/* all exports used */\n/*!*****************************************!*\\\n  !*** ./~/currify/legacy/lib/currify.js ***!\n  \\*****************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar tail = function tail(list) {\n    return [].slice.call(list, 1);\n};\nvar f = function f(fn) {\n    return [function (a) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d, e) {\n        return fn.apply(undefined, arguments);\n    }];\n};\n\nmodule.exports = function currify(fn) {\n    check(fn);\n\n    var args = tail(arguments);\n\n    if (args.length >= fn.length) return fn.apply(undefined, _toConsumableArray(args));\n\n    var again = function again() {\n        return currify.apply(undefined, [fn].concat(_toConsumableArray(args), Array.prototype.slice.call(arguments)));\n    };\n\n    var count = fn.length - arguments.length;\n    var func = f(again)[count];\n\n    return func || again;\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n/***/ }),\n/* 6 */\n/* unknown exports provided */\n/* all exports used */\n/*!*********************************************!*\\\n  !*** ./~/fullstore/legacy/lib/fullstore.js ***!\n  \\*********************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = function () {\n    var data = {};\n\n    return function (value) {\n        if (!arguments.length) return data.value;\n\n        data.value = value;\n\n        return value;\n    };\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// smalltalk.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 44edda3d5bd72e70d2e3","module.exports = es6-promise;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"es6-promise\"\n// module id = 0\n// module chunks = 0 1","module.exports = require('./lib/currify');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/currify/legacy/index.js\n// module id = 1\n// module chunks = 0","module.exports = require('./lib/fullstore');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fullstore/legacy/index.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nwindow.Promise = window.Promise || require('es6-promise');\n\nconst currify = require('currify/legacy');\nconst store = require('fullstore/legacy');\nconst keyDown = currify(keyDown_);\n\nconst remove = bind(removeEl, '.smalltalk');\n\nconst BUTTON_OK = ['OK'];\nconst BUTTON_OK_CANCEL = ['OK', 'Cancel'];\n\nexports.alert = (title, msg) => {\n    return showDialog(title, msg, '', BUTTON_OK, {cancel: false});\n};\n\nexports.prompt = (title, msg, value = '', options) => {\n    const val = String(value).replace(/\\\"/g, '&quot;');\n    const valueStr = `<input type=\"text\" value=\"${ val }\" data-name=\"js-input\">`;\n    \n    return showDialog(title, msg, valueStr, BUTTON_OK_CANCEL, options);\n};\n\nexports.confirm = (title, msg, options) => {\n    return showDialog(title, msg, '', BUTTON_OK_CANCEL, options);\n};\n\nfunction getTemplate(title, msg, value, buttons) {\n    const encodedMsg = msg.replace(/\\n/g, '<br>');\n    \n    return `<div class=\"page\">\n        <div data-name=\"js-close\" class=\"close-button\"></div>\n        <header>${ title }</header>\n        <div class=\"content-area\">\n            ${ encodedMsg }\n            ${ value }\n        </div>\n        <div class=\"action-area\">\n            <div class=\"button-strip\"> ${\n                buttons.map((name, i) =>\n                    `<button tabindex=${ i } data-name=\"js-${ name.toLowerCase() }\">${ name }</button>`\n                ).join('')\n            }\n            </div>\n        </div>\n    </div>`;\n}\n\nfunction showDialog(title, msg, value, buttons, options) {\n    const ok = store();\n    const cancel = store();\n    \n    const dialog = document.createElement('div');\n    const closeButtons = [\n        'cancel',\n        'close',\n        'ok'\n    ];\n    \n    const promise = new Promise((resolve, reject) => {\n        const noCancel = options && !options.cancel;\n        const empty = () => {};\n        \n        ok(resolve);\n        cancel(noCancel ? empty : reject);\n    });\n    \n    const tmpl = getTemplate(title, msg, value, buttons);\n    \n    dialog.innerHTML = tmpl;\n    dialog.className = 'smalltalk';\n    \n    document.body.appendChild(dialog);\n    \n    find(dialog, ['ok', 'input']).forEach((el) =>\n        el.focus()\n    );\n    \n    find(dialog, ['input']).forEach((el) => {\n        el.setSelectionRange(0, value.length);\n    });\n    \n    addListenerAll('click', dialog, closeButtons, (event) =>\n        closeDialog(event.target, dialog, ok(), cancel())\n    );\n    \n    ['click', 'contextmenu'].forEach((event) =>\n        dialog.addEventListener(event, () =>\n            find(dialog, ['ok', 'input']).forEach((el) =>\n                el.focus()\n            )\n        )\n    );\n    \n    dialog.addEventListener('keydown', keyDown(dialog, ok(), cancel()));\n    \n    return promise;\n}\n\nfunction keyDown_(dialog, ok, cancel, event) {\n    const KEY   = {\n        ENTER : 13,\n        ESC   : 27,\n        TAB   : 9,\n        LEFT  : 37,\n        UP    : 38,\n        RIGHT : 39,\n        DOWN  : 40\n    };\n    \n    const keyCode = event.keyCode;\n    const el = event.target;\n    \n    const namesAll = ['ok', 'cancel', 'input'];\n    const names = find(dialog, namesAll)\n        .map(getDataName);\n    \n    switch(keyCode) {\n    case KEY.ENTER:\n        closeDialog(el, dialog, ok, cancel);\n        event.preventDefault();\n        break;\n    \n    case KEY.ESC:\n        remove();\n        cancel();\n        break;\n    \n    case KEY.TAB:\n        if (event.shiftKey)\n            tab(dialog, names);\n        \n        tab(dialog, names);\n        event.preventDefault();\n        break;\n    \n    default:\n        ['left', 'right', 'up', 'down'].filter((name) => {\n            return keyCode === KEY[name.toUpperCase()];\n        }).forEach(() => {\n            changeButtonFocus(dialog, names);\n        });\n        \n        break;\n    }\n    \n    event.stopPropagation();\n}\n\nfunction getDataName(el) {\n    return el\n        .getAttribute('data-name')\n        .replace('js-', '');\n}\n\nfunction changeButtonFocus(dialog, names) {\n    const active = document.activeElement;\n    const activeName = getDataName(active);\n    const isButton = /ok|cancel/.test(activeName);\n    const count = names.length - 1;\n    const getName = (activeName) => {\n        if (activeName === 'cancel')\n            return 'ok';\n        \n        return 'cancel';\n    };\n    \n    if (activeName === 'input' || !count || !isButton)\n        return;\n    \n    const name = getName(activeName);\n    \n    find(dialog, [name]).forEach((el) => {\n        el.focus();\n    });\n}\n\nconst getIndex = (count, index) => {\n    if (index === count)\n        return 0;\n    \n    if (index < count)\n        return index + 1;\n};\n\nfunction tab(dialog, names) {\n    const active = document.activeElement;\n    const activeName = getDataName(active);\n    const count = names.length - 1;\n    \n    const activeIndex = names.indexOf(activeName);\n    const index = getIndex(count, activeIndex);\n    \n    const name = names[index];\n    \n    find(dialog, [name]).forEach((el) =>\n        el.focus()\n    );\n}\n\nfunction closeDialog(el, dialog, ok, cancel) {\n    const name = el\n        .getAttribute('data-name')\n        .replace('js-', '');\n    \n    if (/close|cancel/.test(name)) {\n        cancel();\n        remove();\n        return;\n    }\n    \n    const value = find(dialog, ['input'])\n        .reduce((value, el) => el.value, null);\n    \n    ok(value);\n    remove();\n}\n\nfunction find(element, names) {\n    const notEmpty = (a) => a;\n    const elements = names.map((name) =>\n        element.querySelector(`[data-name=\"js-${ name }\"]`)\n    ).filter(notEmpty);\n    \n    return elements;\n}\n\nfunction addListenerAll(event, parent, elements, fn) {\n    find(parent, elements)\n        .forEach((el) =>\n            el.addEventListener(event, fn)\n        );\n}\n\nfunction removeEl(name) {\n     const el = document.querySelector(name);\n     \n     el.parentElement.removeChild(el);\n}\n\nfunction bind(fn, ...args) {\n    return () => fn(...args);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./lib/smalltalk.js","'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar tail = function tail(list) {\n    return [].slice.call(list, 1);\n};\nvar f = function f(fn) {\n    return [function (a) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d) {\n        return fn.apply(undefined, arguments);\n    }, function (a, b, c, d, e) {\n        return fn.apply(undefined, arguments);\n    }];\n};\n\nmodule.exports = function currify(fn) {\n    check(fn);\n\n    var args = tail(arguments);\n\n    if (args.length >= fn.length) return fn.apply(undefined, _toConsumableArray(args));\n\n    var again = function again() {\n        return currify.apply(undefined, [fn].concat(_toConsumableArray(args), Array.prototype.slice.call(arguments)));\n    };\n\n    var count = fn.length - arguments.length;\n    var func = f(again)[count];\n\n    return func || again;\n};\n\nfunction check(fn) {\n    if (typeof fn !== 'function') throw Error('fn should be function!');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/currify/legacy/lib/currify.js\n// module id = 5\n// module chunks = 0","'use strict';\n\nmodule.exports = function () {\n    var data = {};\n\n    return function (value) {\n        if (!arguments.length) return data.value;\n\n        data.value = value;\n\n        return value;\n    };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fullstore/legacy/lib/fullstore.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}